<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Daisy Chained JS from CSS</title>
	<style>
		#one {
			content:"<script class=\"extras\" id=\"two\" type=\"text/javascript\">appendMagic();</script>";
		}
		#two {
			content:"<script class=\"extras\" id=\"three\" type=\"text/javascript\">appendMagic();</script>";
		}
		#three {
			content:"a";
		}
	</style>
</head>
<body>
	<p>This is a demo of daisy-chaining JavaScript using the CSS "Content" attribute.</p>
	<script type="text/javascript" src="../Kickstrap/js/jquery-1.7.1.min.js"></script>
	<script type="text/javascript" class="extras" id="one">
	appendMagic();
	function appendMagic() {
	var appendee = '#' + $('.extras').last().attr('id');
	console.log(appendee);
	
		document.write(stripslashes($(appendee).css('content')));
		function stripslashes(str) {
			str=str.replace(/\\'/g,'\'');
			str=str.replace(/\\"/g,'"');
			str=str.replace(/\\0/g,'\0');
			str=str.replace(/\\\\/g,'\\');
			str=str.substring(1,str.length-1);
			return str;
		}
	}
	</script>
</body>
</html>